/* =====================================
   Table Styles
   ===================================== */

/* Table CSS Variables */
:root {
  /* Table structure */
  --table-border-collapse: collapse;
  --table-layout: auto;
  --table-width: 100%;

  /* Cell padding */
  --table-cell-padding-x: var(--space-3);
  --table-cell-padding-y: var(--space-2);
  --table-cell-padding-compact-x: var(--space-2);
  --table-cell-padding-compact-y: var(--space-1);
  --table-cell-padding-relaxed-x: var(--space-4);
  --table-cell-padding-relaxed-y: var(--space-3);

  /* Colors */
  --table-bg: transparent;
  --table-fg: var(--color-fg);
  --table-border-color: var(--color-border);
  --table-header-bg: var(--color-bg-subtle);
  --table-header-fg: var(--color-fg);
  --table-header-font-weight: var(--font-weight-semibold);
  --table-row-hover-bg: var(--color-bg-subtle);
  --table-row-stripe-bg: var(--color-bg-subtle);
  --table-caption-fg: var(--color-fg-muted);

  /* Borders */
  --table-border-width: var(--border-width-thin);
  --table-border-style: solid;
  --table-border-radius: var(--radius-md);

  /* Typography */
  --table-font-size: var(--font-size-sm);
  --table-line-height: var(--line-height-normal);

  /* Selected row */
  --table-row-selected-bg: var(--color-accent-subtle);
  --table-row-selected-border: var(--color-accent);

  /* Sortable headers */
  --table-sort-icon-color: var(--color-fg-muted);
  --table-sort-icon-active-color: var(--color-accent);
}

/* Theme-specific table overrides */
:root[data-theme="night"] {
  --table-header-bg: hsl(0 12% 14%);
  --table-row-hover-bg: hsl(0 12% 14%);
  --table-row-stripe-bg: hsl(0 10% 11%);
}

:root[data-theme="dark"] {
  --table-header-bg: hsl(220 13% 16%);
  --table-row-hover-bg: hsl(220 13% 16%);
  --table-row-stripe-bg: hsl(220 12% 13%);
}

:root[data-theme="xorian"] {
  --table-header-bg: hsl(260 25% 14%);
  --table-row-hover-bg: hsl(260 25% 14%);
  --table-row-stripe-bg: hsl(260 24% 11%);
}

:root[data-theme="ocean"] {
  --table-header-bg: hsl(200 35% 14%);
  --table-row-hover-bg: hsl(200 35% 14%);
  --table-row-stripe-bg: hsl(200 34% 11%);
}

:root[data-theme="forest"] {
  --table-header-bg: hsl(140 22% 14%);
  --table-row-hover-bg: hsl(140 22% 14%);
  --table-row-stripe-bg: hsl(140 21% 11%);
}

:root[data-theme="sunset"] {
  --table-header-bg: hsl(25 25% 14%);
  --table-row-hover-bg: hsl(25 25% 14%);
  --table-row-stripe-bg: hsl(25 24% 11%);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --table-header-bg: hsl(220 13% 16%);
    --table-row-hover-bg: hsl(220 13% 16%);
    --table-row-stripe-bg: hsl(220 12% 13%);
  }
}

/* =====================================
   Base Table Styles
   ===================================== */
table {
  width: var(--table-width);
  border-collapse: var(--table-border-collapse);
  font-size: var(--table-font-size);
  line-height: var(--table-line-height);
  color: var(--table-fg);
  background: var(--table-bg);
}

caption {
  text-align: left;
  color: var(--table-caption-fg);
  font-size: var(--font-size-sm);
  padding-block-end: var(--space-2);
}

/* =====================================
   Table Header
   ===================================== */
thead {
  background: var(--table-header-bg);
}

th {
  padding: var(--table-cell-padding-y) var(--table-cell-padding-x);
  text-align: left;
  font-weight: var(--table-header-font-weight);
  color: var(--table-header-fg);
  border-bottom: var(--table-border-width) var(--table-border-style) var(--table-border-color);
  white-space: nowrap;
}

/* =====================================
   Table Body
   ===================================== */
td {
  padding: var(--table-cell-padding-y) var(--table-cell-padding-x);
  text-align: left;
  vertical-align: top;
  border-bottom: var(--table-border-width) var(--table-border-style) var(--table-border-color);
}

/* Remove bottom border from last row */
tbody tr:last-child td {
  border-bottom: none;
}

/* =====================================
   Table Footer
   ===================================== */
tfoot {
  background: var(--table-header-bg);
}

tfoot td,
tfoot th {
  border-top: var(--table-border-width) var(--table-border-style) var(--table-border-color);
  border-bottom: none;
  font-weight: var(--table-header-font-weight);
}

/* =====================================
   Table Variants
   ===================================== */

/* Bordered table */
.table-bordered {
  border: var(--table-border-width) var(--table-border-style) var(--table-border-color);
  border-radius: var(--table-border-radius);
  overflow: hidden;
}

.table-bordered th,
.table-bordered td {
  border: var(--table-border-width) var(--table-border-style) var(--table-border-color);
}

/* Striped rows */
.table-striped tbody tr:nth-child(even) {
  background: var(--table-row-stripe-bg);
}

/* Hoverable rows */
.table-hover tbody tr {
  transition: background-color var(--duration-fast) var(--ease-out);
}

.table-hover tbody tr:hover {
  background: var(--table-row-hover-bg);
}

/* Compact table */
.table-compact th,
.table-compact td {
  padding: var(--table-cell-padding-compact-y) var(--table-cell-padding-compact-x);
}

/* Relaxed table */
.table-relaxed th,
.table-relaxed td {
  padding: var(--table-cell-padding-relaxed-y) var(--table-cell-padding-relaxed-x);
}

/* Fixed layout */
.table-fixed {
  table-layout: fixed;
}

/* =====================================
   Responsive Table
   ===================================== */
.table-responsive {
  display: block;
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.table-responsive > table {
  margin-bottom: 0;
}

/* =====================================
   Sortable Headers
   ===================================== */
th[data-sortable] {
  cursor: pointer;
  user-select: none;
  position: relative;
  padding-right: calc(var(--table-cell-padding-x) + 1.25rem);
}

th[data-sortable]::after {
  content: "";
  position: absolute;
  right: var(--table-cell-padding-x);
  top: 50%;
  transform: translateY(-50%);
  width: 0.75rem;
  height: 0.75rem;
  opacity: 0.4;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M7 10l5-5 5 5M7 14l5 5 5-5'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-size: contain;
}

th[data-sortable]:hover::after {
  opacity: 0.7;
}

th[data-sortable][aria-sort="ascending"]::after {
  opacity: 1;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M7 14l5-5 5 5'/%3E%3C/svg%3E");
}

th[data-sortable][aria-sort="descending"]::after {
  opacity: 1;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M7 10l5 5 5-5'/%3E%3C/svg%3E");
}

/* =====================================
   Row States
   ===================================== */
tr.selected {
  background: var(--table-row-selected-bg);
}

tr.selected td {
  border-bottom-color: var(--table-row-selected-border);
}

/* Status rows */
tr.success {
  background: var(--color-success-subtle);
}

tr.warning {
  background: var(--color-warning-subtle);
}

tr.error {
  background: var(--color-error-subtle);
}

tr.info {
  background: var(--color-info-subtle);
}

/* =====================================
   Cell Alignment
   ===================================== */
.text-left {
  text-align: left;
}

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

.align-top {
  vertical-align: top;
}

.align-middle {
  vertical-align: middle;
}

.align-bottom {
  vertical-align: bottom;
}

/* =====================================
   Cell Widths
   ===================================== */
.w-auto {
  width: auto;
}

.w-1 {
  width: 1%;
}

.w-5 {
  width: 5%;
}

.w-10 {
  width: 10%;
}

.w-15 {
  width: 15%;
}

.w-20 {
  width: 20%;
}

.w-25 {
  width: 25%;
}

.w-30 {
  width: 30%;
}

.w-33 {
  width: 33.333%;
}

.w-40 {
  width: 40%;
}

.w-50 {
  width: 50%;
}

.w-60 {
  width: 60%;
}

.w-70 {
  width: 70%;
}

.w-75 {
  width: 75%;
}

.w-80 {
  width: 80%;
}

.w-90 {
  width: 90%;
}

.w-100 {
  width: 100%;
}

/* =====================================
   Empty State
   ===================================== */
.table-empty {
  text-align: center;
  color: var(--color-fg-muted);
  font-style: italic;
  padding: var(--space-8);
}

/* =====================================
   Action Cells
   ===================================== */
.table-actions {
  white-space: nowrap;
  text-align: right;
}

.table-actions > * + * {
  margin-left: var(--space-2);
}

/* =====================================
   Sticky Header
   ===================================== */
.table-sticky thead th {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
  background: var(--table-header-bg);
}

/* =====================================
   Number/Mono Cells
   ===================================== */
.cell-mono {
  font-family: var(--font-family-mono);
  font-size: var(--font-size-xs);
}

.cell-number {
  font-variant-numeric: tabular-nums;
  text-align: right;
}

/* =====================================
   Truncated Cells
   ===================================== */
.cell-truncate {
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* =====================================
   Loading State
   ===================================== */
.table-loading {
  position: relative;
  pointer-events: none;
}

.table-loading::after {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--color-bg);
  opacity: 0.7;
  display: flex;
  align-items: center;
  justify-content: center;
}
